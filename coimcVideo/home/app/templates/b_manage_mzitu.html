{% extends 'h_base__.html' %}

{% block title %}MZT管理{% endblock %}


{% block css %}
<style type="text/css">
    .sw-40 {
        width: 80px;
    }

    .table a {
        text-decoration: none;
    }
</style>

{% endblock %}

{% block content %}
<div class="container-fluid text-c mt-20">
    <div class="btn-group">
        <span id="blogs" class="btn btn-default radius sw-40">日志</span>
        <span id="comments" class="btn btn-default radius sw-40">评论</span>
        <span id="users" class="btn btn-default radius sw-40">用户</span>
        <span id="mzt" class="btn btn-warning radius sw-40">MZiTu</span>
        <span id="mht" class="btn btn-default radius sw-40">MHuaTai</span>
    </div>
    <!-- 错误提示消息 -->
    <div style="height: 40px" class="mt-5 mb-5" id="errorMsg">
    </div>

    <div style="min-height: 160px">
        <div class="col-md-1 col-md-offset-2" style="padding: 4px 5px;">
            <label>选择操作</label>
        </div>

        <div class="col-md-2"><span class="select-box radius">
        <select class="select" size="1" onchange="inputUrl(this)">
            <option value="0">索引图(全部)</option>
            <option value="1">子图详情(全部)</option>
            <option value="2">索引图(指定)</option>
            <option value="3">子图详情(指定)</option>
        </select></span></div>
        <div id="url_in" class="col-md-2" style="display: none"><input class="input-text" placeholder="输入地址：http://">
        </div>
        <div class="col-md-1">
            <a href="javascript:;" class="btn btn-danger radius"><i class="icon Hui-iconfont Hui-iconfont-xuanze"></i>&nbsp;&nbsp;&nbsp;执行</a>
        </div>

    </div>

    <div><span class="f-20">操作记录日志</span></div>
    <table class="table table-border table-bg table-hover">
        <thead>
        <tr>
            <th>操作类型</th>
            <th>内容</th>
            <th>状态</th>
            <th>执行时间</th>
        </tr>
        </thead>

        <tbody>

        <tr>
            <td>获取套图地址篇</td>
            <td>全部索引套图地址</td>
            <td><a herf="javascript:;" onclick="showErrorMsg('执行中...')">执行中...</a></td>
            <td>1分钟前</td>
        </tr>

        <tr>
            <td>获取套图子图片</td>
            <td>选择性获取</td>
            <td><a herf="javascript:;" onclick="closeErrorMsg()">执行完毕！</a></td>
            <td>10分钟前</td>
        </tr>
        <!--{% for user in users %}-->
        <!--<tr>-->
        <!--<td>-->
        <!--<img class="avatar size-M radius" src="{{ user.image }}"><span>&nbsp;&nbsp;&nbsp;{{user.name}}</span>-->
        <!--</td>-->
        <!--<td>-->
        <!--<span>{{user.email}}</span>-->
        <!--</td>-->
        <!--<td>-->
        <!--<span>{{user.created_at|showtime}}</span>-->
        <!--</td>-->

        <!--</tr>-->
        <!--{% endfor%}-->
        </tbody>

    </table>
    <div class="mt-10">
        <span>当前记录条数：10</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总共记录条数：200</span><br>
        <a href="javascript:;" class="btn btn-warning radius mt-10"><i
                class="icon Hui-iconfont Hui-iconfont-more2 "></i> 点击加载更多 <i
                class="icon Hui-iconfont Hui-iconfont-more2"></i></a>
    </div>


    <!--{{ pagination('/?page=', page) }}-->
</div>


{% endblock %}

{% block js %}
<script type="text/javascript">

    function showErrorMsg(msg) {
        if (!msg) {
            msg = '操作成功!';
        }
        var content = '<div class="Huialert Huialert-success"><i class="Hui-iconfont" onclick="closeErrorMsg()"></i><span class="c-red">' + msg + '</span></div>';
        $('#errorMsg').html(content);
    }

    function closeErrorMsg() {
        $('#errorMsg').html('');
    }

    function inputUrl(obj) {
        var hideArr = ['0', '1'];
        var showArr = ['2', '3'];
        var value = $(obj).val();
        if(hideArr.indexOf(value) !== -1){
            $('#url_in').hide();
            tipMsg('不推荐此操作，全量更新，花费时间较长，建议第一次无数据的时候启用.');
            setTimeout(closeErrorMsg,4000,{});
        }else if(showArr.indexOf(value) !== -1){
            $('#url_in').show();
            tipMsg('当前操作为更新/新增操作，多个地址时可用‘|’分隔地址.');
            setTimeout(closeErrorMsg,4000,{});
        }else{
            $('#url_in').hide();
        }
    }

    function tipMsg(msg) {
        var content = '<div class="Huialert Huialert-info"><i class="Hui-iconfont" onclick="closeErrorMsg()"></i><span class="c-red">' + msg + '</span></div>';
        $('#errorMsg').html(content);
    }


    $('span.sw-40').on('click', function () {
        var name = $(this).attr('id');
        location.assign('/auth/manage/' + name + '.html');
    });

</script>
{% endblock %}